<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pratik Tiwari — Interactive Research Slides</title>

  <!-- CSS -->
  <link rel="stylesheet" href="index_swipe.css">

  <!-- Font Awesome for icons -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
</head>
<body>

  <!-- Small top nav -->
  <div class="site-nav" aria-hidden="false">
    <a href="#slide-1" data-slide="0">Home</a>
    <a href="#slide-2" data-slide="1">Research</a>
    <a href="#slide-3" data-slide="2">Skills</a>
    <a href="#slide-4" data-slide="3">Projects</a>
    <a href="#slide-5" data-slide="4">Contact</a>
  </div>

  <!-- SWIPER wrapper -->
  <div class="swiper">
    <div class="swiper-wrapper">

      <!-- SLIDE 1: HERO -->
      <section id="slide-1" class="swiper-slide hero-slide" aria-label="Hero">
        <canvas id="flameCanvas"></canvas>

        <div class="wrap hero-content">
          <div class="hero-left">
            <h1>Hi — I'm <span>Pratik Tiwari</span>.</h1>
            <p class="lead">Combustion systems engineer · CFD & diagnostics · propulsion test & automation</p>
            <div class="hero-ctas">
              <a class="btn btn-primary" href="files/Pratik_Tiwari_CV.pdf" download>Download CV</a>
              <button id="quickContact" class="btn btn-outline">Request Paper / Collab</button>
            </div>
          </div>

          <div class="hero-right">
            <img class="portrait" src="assets/img/portrait.jpg" alt="Pratik portrait" />
          </div>
        </div>
      </section>

      <!-- SLIDE 2: RESEARCH (Education + Publications timeline) -->
      <section id="slide-2" class="swiper-slide" aria-label="Research">
        <div class="wrap">
          <h2 class="section-title">Education & Publications</h2>

          <div class="timeline">
            <!-- Education item -->
            <article class="timeline-item">
              <div class="timeline-left">
                <div class="timeline-box"><strong>Dec 2024</strong><div class="muted">UT Space Institute</div></div>
              </div>
              <div class="timeline-right">
                <h3>MS — Aerospace Engineering</h3>
                <p>Focus: Propulsion test automation, laser diagnostics, and combustion stability experiments.</p>
              </div>
            </article>

            <!-- Publication item -->
            <article class="timeline-item">
              <div class="timeline-left">
                <div class="timeline-box"><strong>2024</strong><div class="muted">ASME Turbo Expo</div></div>
              </div>
              <div class="timeline-right">
                <h3>Ignition Characteristics of Fully Premixed Hydrogen/Air</h3>
                <p>High-speed chemiluminescence and schlieren imaging supporting LES/VLES validation.</p>
                <p class="muted small">Click "View" to request paper (opens contact slide pre-filled).</p>
                <div style="margin-top:10px">
                  <button class="btn btn-ghost small request-paper" data-subject="Request: Ignition Characteristics paper">Request Paper</button>
                </div>
              </div>
            </article>

          </div>
        </div>
      </section>

      <!-- SLIDE 3: SKILLS -->
      <section id="slide-3" class="swiper-slide" aria-label="Skills">
        <div class="wrap">
          <h2 class="section-title" style="color:var(--text-primary)">Skills & Expertise</h2>

          <div class="skills-grid">
            <div class="skill-card">
              <div class="skill-info">
                <div class="skill-name">Propulsion & Gas Turbine Systems</div>
                <div class="skill-bar"><div class="skill-fill" data-fill="90%"></div></div>
              </div>
              <div class="skill-value">90%</div>
            </div>

            <div class="skill-card">
              <div class="skill-info">
                <div class="skill-name">CFD (ANSYS Fluent / OpenFOAM)</div>
                <div class="skill-bar"><div class="skill-fill" data-fill="85%"></div></div>
              </div>
              <div class="skill-value">85%</div>
            </div>

            <div class="skill-card">
              <div class="skill-info">
                <div class="skill-name">Testing & Diagnostics</div>
                <div class="skill-bar"><div class="skill-fill" data-fill="92%"></div></div>
              </div>
              <div class="skill-value">92%</div>
            </div>

            <div class="skill-card">
              <div class="skill-info">
                <div class="skill-name">Python / MATLAB / Data</div>
                <div class="skill-bar"><div class="skill-fill" data-fill="88%"></div></div>
              </div>
              <div class="skill-value">88%</div>
            </div>
          </div>
        </div>
      </section>

      <!-- SLIDE 4: PROJECTS (flip cards) -->
      <section id="slide-4" class="swiper-slide" aria-label="Projects">
        <div class="wrap">
          <h2 class="section-title">Highlighted Projects</h2>

          <div class="projects-grid">
            <!-- Card 1 -->
            <div class="flip-card" tabindex="0" aria-label="Project: Hydrogen Combustion">
              <div class="flip-card-inner">
                <div class="card-front">
                  <div class="project-head">
                    <h3>High-pressure hydrogen injector</h3>
                    <p class="muted">Injector design, automated rig, CFD validation</p>
                  </div>
                  <div class="project-actions">
                    <button class="btn btn-ghost small">View</button>
                    <button class="btn btn-outline small">Request Paper</button>
                  </div>
                </div>

                <div class="card-back">
                  <div>
                    <h4>Details</h4>
                    <p>Design & testing of swirl injector under high pressure with ignition mapping and chemiluminescence diagnostics. CFD vs experiment validation included.</p>
                    <p style="margin-top:12px"><a href="#" class="btn btn-primary small">Download summary</a></p>
                  </div>
                </div>
              </div>
            </div>

            <!-- Card 2 -->
            <div class="flip-card" tabindex="0" aria-label="Project: Ammonia Study">
              <div class="flip-card-inner">
                <div class="card-front">
                  <div class="project-head">
                    <h3>Ammonia SI combustion study</h3>
                    <p class="muted">Ignition mapping with high-speed imaging</p>
                  </div>
                  <div class="project-actions">
                    <button class="btn btn-ghost small">View</button>
                    <button class="btn btn-outline small">Request Paper</button>
                  </div>
                </div>

                <div class="card-back">
                  <div>
                    <h4>Details</h4>
                    <p>Experimental campaigns exploring pre-mixed ignition and emissions. Tools: high-speed schlieren, chemiluminescence and controlled ignition mapping.</p>
                    <p style="margin-top:12px"><a href="#" class="btn btn-primary small">Download summary</a></p>
                  </div>
                </div>
              </div>
            </div>

            <!-- Card 3 -->
            <div class="flip-card" tabindex="0" aria-label="Project: Test Automation">
              <div class="flip-card-inner">
                <div class="card-front">
                  <div class="project-head">
                    <h3>Test automation & data pipelines</h3>
                    <p class="muted">DAQ scripts, automated post-processing</p>
                  </div>
                  <div class="project-actions">
                    <button class="btn btn-ghost small">View</button>
                    <button class="btn btn-outline small">Request Paper</button>
                  </div>
                </div>

                <div class="card-back">
                  <div>
                    <h4>Details</h4>
                    <p>Automated data acquisition + post-processing pipeline for repeated high-pressure tests. Integration with Python and MATLAB workflows.</p>
                    <p style="margin-top:12px"><a href="#" class="btn btn-primary small">Download summary</a></p>
                  </div>
                </div>
              </div>
            </div>

          </div>
        </div>
      </section>

      <!-- SLIDE 5: CONTACT -->
      <section id="slide-5" class="swiper-slide" aria-label="Contact">
        <div class="wrap">
          <h2 class="section-title" style="color:var(--text-primary)">Contact & Collaboration</h2>

          <div class="contact-grid">
            <form class="contact-form" id="contactForm">
              <p style="margin:0 0 10px 0;color:var(--accent-tertiary);font-weight:700">Request paper / collaboration</p>
              <input type="text" name="name" placeholder="Your name" required>
              <input type="email" name="email" placeholder="Email" required>
              <input type="text" name="subject" placeholder="Subject" required>
              <textarea name="message" placeholder="Brief message" rows="6" required></textarea>
              <button class="btn btn-primary" type="submit">Send request</button>
            </form>

            <aside class="contact-side">
              <h4 style="margin:0 0 8px 0">Quick contacts</h4>
              <div class="contact-quick">
                <div><strong>Email:</strong> <a href="mailto:ptiwari4@vols.utk.edu">ptiwari4@vols.utk.edu</a></div>
                <div><strong>Phone:</strong> +1 458 272 7955</div>
                <div><strong>ORCID:</strong> <a href="https://orcid.org">orcid.org/XXXX</a></div>
              </div>

              <div class="social-row" role="list">
                <a href="https://www.linkedin.com/in/pratiktiwari/" target="_blank" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                <a href="https://scholar.google.com" target="_blank" aria-label="Google Scholar"><i class="fas fa-graduation-cap"></i></a>
                <a href="https://orcid.org" target="_blank" aria-label="ORCID"><i class="fab fa-orcid"></i></a>
                <a href="https://www.instagram.com" target="_blank" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
              </div>
            </aside>
          </div>
        </div>
      </section>

      <!-- SLIDE 6: OUTRO -->
      <section id="slide-6" class="swiper-slide" aria-label="Thanks">
        <div class="wrap" style="text-align:center">
          <h2 style="margin-top:0">Thanks for visiting</h2>
          <p style="max-width:760px;margin:12px auto 24px auto;opacity:0.92">If you'd like PDFs, data, or to discuss collaboration — use the contact slide or email <a href="mailto:ptiwari4@vols.utk.edu">ptiwari4@vols.utk.edu</a>.</p>
          <div style="display:flex;gap:12px;justify-content:center">
            <a class="btn btn-primary" href="files/Pratik_Tiwari_CV.pdf" download>Download CV</a>
            <button class="btn btn-outline" id="backHome">Back to top</button>
          </div>
        </div>
      </section>

    </div>

    <!-- pagination (dots) -->
    <div class="swiper-pagination" aria-hidden="false"></div>
  </div>

  <!-- LIBRARIES -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>

  <!-- APP LOGIC -->
  <script>
  // ---------------- SWIPER ----------------
  const swiper = new Swiper('.swiper', {
    direction: 'horizontal',
    slidesPerView: 1,
    spaceBetween: 0,
    speed: 800,
    mousewheel: true,
    keyboard: { enabled: true },
    pagination: { el: '.swiper-pagination', clickable: true },
    on: {
      init: function(){ runSlideInAnimations(this.activeIndex); },
      slideChangeTransitionEnd: function(){ runSlideInAnimations(this.activeIndex); }
    }
  });

  // top nav -> control swiper
  document.querySelectorAll('.site-nav a').forEach(a=>{
    a.addEventListener('click', (e)=>{
      e.preventDefault();
      swiper.slideTo(Number(a.dataset.slide));
    });
  });

  document.getElementById('backHome').addEventListener('click', ()=> swiper.slideTo(0));
  document.getElementById('quickContact').addEventListener('click', ()=> swiper.slideTo(4));

  // ---------------- ANIMATIONS ----------------
  gsap.registerPlugin(ScrollTrigger);

  function runSlideInAnimations(index){
    // index mapping: 0 hero, 1 research, 2 skills, 3 projects, 4 contact, 5 outro
    if(index === 1) animateTimeline();
    if(index === 2) animateSkillFills();
    if(index === 3) animateProjects();
    // small hero pulse when returning to hero
    if(index === 0 && window._flameUniforms) {
      gsap.to(window._flameUniforms.u_intensity, { value: 1.6, duration: 0.35, yoyo:true, repeat:1 });
    }
  }

  // Timeline animation (slide in left box & right content)
  function animateTimeline(){
    const items = document.querySelectorAll('#slide-2 .timeline-item');
    gsap.killTweensOf(items);
    gsap.fromTo(items, {autoAlpha:0, y:30}, {
      autoAlpha:1, y:0, duration:0.7, stagger:0.12, ease:'power3.out'
    });
    items.forEach((it) => {
      const left = it.querySelector('.timeline-left .timeline-box');
      const right = it.querySelector('.timeline-right');
      if(left) gsap.fromTo(left, {x:-30, autoAlpha:0}, {x:0, autoAlpha:1, duration:0.6});
      if(right) gsap.fromTo(right, {x:30, autoAlpha:0}, {x:0, autoAlpha:1, duration:0.6, delay:0.08});
    });
  }

  // Skills fill animation
  function animateSkillFills(){
    document.querySelectorAll('.skill-fill').forEach(el=>{
      const target = el.dataset.fill || '80%';
      gsap.to(el, { width: target, duration: 1.2, ease:'power2.out' });
    });
  }

  // Projects entry animation
  function animateProjects(){
    const cards = document.querySelectorAll('.flip-card');
    gsap.fromTo(cards, {y:30, autoAlpha:0}, {y:0, autoAlpha:1, duration:0.7, stagger:0.08, ease:'power3.out'});
  }

  // ---------------- FLIP CARDS ----------------
  function initFlipCards(){
    document.querySelectorAll('.flip-card').forEach(card=>{
      const inner = card.querySelector('.flip-card-inner');
      card.addEventListener('click', (e)=>{
        // Don't flip when clicking real buttons inside front face
        if(e.target.closest('button') || e.target.tagName === 'A') return;
        inner.classList.toggle('is-flipped');
      });
      // keyboard accessibility
      card.addEventListener('keydown', (ev)=>{
        if(ev.key === 'Enter' || ev.key === ' ') { ev.preventDefault(); inner.classList.toggle('is-flipped'); }
      });
    });
  }

  // ---------------- PROJECT ACTIONS (request paper) ----------------
  document.addEventListener('click', (e) => {
    if(e.target.matches('.request-paper')) {
      // go to contact slide and prefill subject
      const subj = e.target.dataset.subject || 'Request paper';
      swiper.slideTo(4);
      setTimeout(()=> {
        const form = document.getElementById('contactForm');
        if(form) form.subject && (form.subject.value = subj);
      }, 400);
    }
  });

  // ---------------- CONTACT FORM ----------------
  document.getElementById('contactForm').addEventListener('submit', function(e){
    e.preventDefault();
    const form = this;
    gsap.fromTo(form, {y:0}, {y:-6, duration:0.06, yoyo:true, repeat:1});
    // dummy success
    alert('Thanks — request received. I will reply to the email you provided.');
    form.reset();
  });

  // ---------------- FLAME SHADER (Three.js) ----------------
  (function(){
    const canvas = document.getElementById('flameCanvas');
    const renderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true, alpha: true });
    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.setClearColor(0x000000, 0);

    const scene = new THREE.Scene();
    const camera = new THREE.OrthographicCamera(-1,1,1,-1,0,1);
    const geometry = new THREE.PlaneGeometry(2,2);

    const uniforms = {
      u_time: { value: 0.0 },
      u_resolution: { value: new THREE.Vector2(window.innerWidth, window.innerHeight) },
      u_mouse: { value: new THREE.Vector2(-9999, -9999) },
      u_intensity: { value: 1.0 }
    };

    const frag = `precision highp float;
    uniform vec2 u_resolution; uniform float u_time; uniform vec2 u_mouse; uniform float u_intensity;
    float hash(vec2 p){return fract(sin(dot(p,vec2(127.1,311.7)))*43758.5453123);}
    float noise(vec2 p){vec2 i=floor(p);vec2 f=fract(p);vec2 u=f*f*(3.0-2.0*f);float a=hash(i),b=hash(i+vec2(1.0,0.0)),c=hash(i+vec2(0.0,1.0)),d=hash(i+vec2(1.0,1.0));return mix(mix(a,b,u.x),mix(c,d,u.x),u.y);}
    float fbm(vec2 p){float v=0.0;float a=0.5;for(int i=0;i<5;i++){v+=a*noise(p);p*=2.0;a*=0.5;}return v;}
    void main(){ vec2 uv = gl_FragCoord.xy / u_resolution.xy; vec2 pos = uv - 0.5; pos.x *= u_resolution.x/u_resolution.y; float t = u_time*0.6;
      float center = abs(pos.x);
      float core = smoothstep(0.22, 0.06, center * (1.0 + pos.y*0.3));
      float n = fbm(vec2(pos.x*2.0, pos.y*4.0 - t*0.8));
      float vertical = fbm(vec2(pos.x*8.0, pos.y*10.0 - t*2.2));
      float flameshape = core * (0.45 + 0.9 * n) * (0.6 + 0.4*vertical);
      float radial = smoothstep(0.95,0.2,length(pos.xy*vec2(1.0,0.9)));
      float intensity = clamp(flameshape * radial, 0.0, 1.0);
      float smoke = fbm(vec2(pos.x*0.8, pos.y*1.2 - t*0.25));
      smoke = smoothstep(0.18,0.8,smoke);
      vec3 hot = vec3(1.0,0.96,0.8);
      vec3 yellow = vec3(1.0,0.72,0.15);
      vec3 orange = vec3(0.98,0.42,0.08);
      vec3 red = vec3(0.65,0.12,0.03);
      vec3 smokeCol = vec3(0.06,0.06,0.08);
      vec3 col = mix(smokeCol, red, intensity);
      col = mix(col, orange, intensity*0.8);
      col = mix(col, yellow, intensity*0.45);
      col = mix(col, hot, intensity*0.2);
      float flick = 0.12 * noise(vec2(pos.x*5.0 + u_time*0.8, pos.y*3.0));
      float md = length((gl_FragCoord.xy - u_mouse) / u_resolution.xy);
      float mouseBoost = exp(-md*6.0);
      intensity += flick * mouseBoost * 0.6;
      float smokeOverlay = smoothstep(0.25, 0.8, smoke) * (1.0 - intensity*0.6);
      float alpha = clamp(intensity*1.2 + (1.0 - pos.y)*0.2, 0.0, 1.0);
      vec3 finalCol = mix(vec3(0.02,0.02,0.03), col*(0.6 + intensity*0.8), alpha);
      finalCol = mix(finalCol, vec3(0.08,0.08,0.09), smokeOverlay*0.6);
      finalCol = 1.0 - exp(-finalCol * (2.2 * u_intensity));
      float vignette = smoothstep(0.0, 0.8, 1.0 - length(pos)*1.3);
      finalCol *= vignette;
      gl_FragColor = vec4(finalCol, clamp(alpha + (1.0 - smokeOverlay)*0.05, 0.0, 1.0));
    }`;

    const material = new THREE.ShaderMaterial({ fragmentShader: frag, uniforms: uniforms, transparent:true, depthWrite:false });
    const mesh = new THREE.Mesh(geometry, material);
    scene.add(mesh);

    function onPointerMove(e){
      const rect = renderer.domElement.getBoundingClientRect();
      const x = (e.clientX - rect.left);
      const y = (rect.bottom - e.clientY);
      uniforms.u_mouse.value.set(x, y);
    }
    window.addEventListener('pointermove', onPointerMove);

    function onResize(){
      const w = window.innerWidth, h = window.innerHeight;
      renderer.setSize(w,h);
      uniforms.u_resolution.value.set(w,h);
    }
    window.addEventListener('resize', onResize, { passive:true });

    const clock = new THREE.Clock();
    (function renderLoop(){
      uniforms.u_time.value = clock.getElapsedTime();
      renderer.render(scene, camera);
      requestAnimationFrame(renderLoop);
    })();

    window._flameUniforms = uniforms;
  })();

  // initialize interactive features
  initFlipCards();
  // make sure initial animations run for first slide
  runSlideInAnimations(swiper.activeIndex);

  // helper: init flip cards after DOM is ready (covers dynamic creation)
  function initFlipCards(){ /* function declared earlier - safe to call again */ }
  </script>
</body>
</html>
