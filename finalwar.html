<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Pratik Tiwari â€” Portfolio (Polished)</title>

  <!-- Icons & libs -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fullPage.js/4.0.23/fullpage.min.js"></script>

  <style>
    /* ================= THEME & LAYOUT ================= */
    :root{
      --brand: #10b981;
      --bg-1: #f5f6f7;         /* light background */
      --bg-2: #eceeef;
      --text: #0b0b0b;         /* primary text */
      --card: #ffffff;
      --muted: rgba(11,11,11,0.62);
      --glass: rgba(255,255,255,0.75);
      --max-width: 1200px;
      --radius: 12px;
    }
    html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg-1),var(--bg-2));font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Arial;color:var(--text);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;}
    a{color:var(--brand)}
    /* NAV */
    nav{position:fixed;top:14px;left:50%;transform:translateX(-50%);z-index:140;display:flex;align-items:center}
    .nav-bar{display:flex;gap:12px;padding:10px 16px;background:var(--glass);backdrop-filter:blur(6px);border-radius:14px;align-items:center;box-shadow:0 8px 30px rgba(6,9,12,0.06)}
    .nav-title{font-weight:800;margin-right:6px}
    .nav-bar a{color:var(--text);font-weight:600;text-decoration:none}
    .toggle-btn{margin-left:8px;padding:6px;border-radius:8px;background:transparent;border:1px solid rgba(0,0,0,0.06);cursor:pointer}
    /* SECTIONS */
    .section{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:64px 28px;position:relative;overflow:hidden}
    .wrap{position:relative;z-index:8;max-width:var(--max-width);width:100%;margin:0 auto}
    canvas#flame{position:absolute;inset:0;width:100%;height:100%;z-index:0;display:block;pointer-events:none;filter:blur(0.4px) saturate(1.05)}
    /* HERO */
    .hero-inner{display:flex;gap:36px;align-items:center;position:relative;z-index:10}
    .hero-left{flex:1;max-width:820px}
    .hero-right{width:320px;flex:0 0 320px}
    .portrait{width:100%;height:320px;object-fit:cover;border-radius:14px;border:4px solid rgba(0,0,0,0.04);box-shadow:0 24px 60px rgba(16,185,129,0.06)}
    .title{font-size:min(3.8rem,8.4vw);margin:0 0 8px 0;font-weight:800}
    .lead{margin:0;color:var(--muted);font-size:1.05rem}
    .cta{display:flex;gap:12px;margin-top:20px;align-items:center}
    /* BUTTONS */
    .btn{display:inline-flex;align-items:center;gap:10px;padding:12px 18px;border-radius:999px;background:var(--brand);color:white;font-weight:800;border:none;cursor:pointer;box-shadow:0 12px 36px rgba(16,185,129,0.14);text-decoration:none}
    .btn.secondary{background:transparent;color:var(--text);border:1px solid rgba(0,0,0,0.06)}
    .magnetic{will-change:transform;transform:translateZ(0)}
    /* ABOUT / TIMELINE */
    .timeline{margin-top:24px;display:grid;grid-template-columns:repeat(3,1fr);gap:18px}
    .timeline-card{background:var(--card);padding:18px;border-radius:10px;box-shadow:0 10px 28px rgba(6,9,12,0.05);border:1px solid rgba(6,9,12,0.04)}
    .muted{color:var(--muted)}
    /* EXPERIENCE TIMELINE (inspired) */
    .exp-list{margin-top:18px;display:flex;flex-direction:column;gap:14px}
    .exp-item{display:flex;gap:14px;align-items:flex-start;background:var(--card);padding:14px;border-radius:10px;border:1px solid rgba(6,9,12,0.04);box-shadow:0 8px 24px rgba(6,9,12,0.04)}
    .exp-meta{min-width:120px;color:var(--muted);font-size:0.95rem}
    .exp-body h4{margin:0;font-size:1.05rem}
    .exp-body p{margin:6px 0 0 0;color:var(--muted)}
    /* SKILLS */
    .skill-row{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
    .skill-bar{flex:1;height:12px;border-radius:999px;background:#ebedf0;overflow:hidden;margin-left:12px}
    .skill-fill{height:100%;width:0;border-radius:999px;background:linear-gradient(90deg,var(--brand),#059669);transform-origin:left center}
    /* PROJECTS */
    .projects-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:18px;margin-top:18px}
    .project-card{position:relative;border-radius:12px;background:var(--card);padding:18px;min-height:200px;box-shadow:0 12px 30px rgba(6,9,12,0.05);border:1px solid rgba(6,9,12,0.04);transition:transform .28s}
    .project-card:hover{transform:translateY(-6px)}
    /* PUBLICATIONS */
    .pub-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
    .pub-card{background:var(--card);padding:14px;border-radius:10px;border:1px solid rgba(6,9,12,0.04);box-shadow:0 8px 18px rgba(6,9,12,0.04)}
    /* CONTACT */
    .contact-wrapper{background:var(--card);padding:24px;border-radius:12px;box-shadow:0 12px 30px rgba(6,9,12,0.06);border:1px solid rgba(6,9,12,0.04)}
    .contact-icons{display:flex;gap:12px;margin-top:14px}
    .contact-icons a{display:inline-flex;align-items:center;justify-content:center;width:44px;height:44px;border-radius:8px;background:#f6f7f8;color:var(--text);text-decoration:none;border:1px solid rgba(6,9,12,0.04);transition:all .18s}
    .contact-icons a:hover{background:var(--brand);color:white;transform:translateY(-4px)}
    /* RESPONSIVE */
    @media(max-width:1000px){ .timeline{grid-template-columns:repeat(2,1fr)} .projects-grid{grid-template-columns:repeat(2,1fr)} }
    @media(max-width:640px){ .hero-inner{flex-direction:column-reverse;text-align:center} .hero-right{width:220px} .timeline{grid-template-columns:1fr} .projects-grid{grid-template-columns:1fr} nav{left:10px;transform:none} }
    /* DARK THEME */
    body.dark{--bg-1:#07101a;--bg-2:#08101a;--text:#e7eef6;--card:rgba(255,255,255,0.03);--muted:rgba(231,238,246,0.72)}
    body.dark a{color:var(--brand)}
    /* focus */
    :focus{outline:3px solid rgba(16,185,129,0.14);outline-offset:4px}
  </style>
</head>
<body>

  <!-- NAV -->
  <nav aria-label="Main navigation">
    <div class="nav-bar" role="navigation">
      <div class="nav-title">Pratik Tiwari</div>
      <a href="#home">Home</a>
      <a href="#about">About</a>
      <a href="#education">Education</a>
      <a href="#skills">Skills</a>
      <a href="#experience">Experience</a>
      <a href="#projects">Projects</a>
      <a href="#publications">Publications</a>
      <a href="#contact">Contact</a>
      <button id="themeToggle" class="toggle-btn" aria-pressed="false" title="Toggle theme">ðŸŒ™</button>
    </div>
  </nav>

  <div id="fullpage">
    <!-- HERO -->
    <section id="home" class="section" aria-label="home">
      <canvas id="flame" aria-hidden="true"></canvas>

      <div class="wrap hero-inner" role="region" aria-label="hero content">
        <div class="hero-left">
          <h1 class="title" id="heroTitle">Hi â€” I'm <span style="color:var(--brand)">Pratik</span>.</h1>
          <p class="lead muted">Combustion systems engineer Â· CFD & diagnostics Â· propulsion test & automation</p>

          <div class="cta">
            <a class="btn magnetic" href="#about">About</a>
            <a class="btn secondary magnetic" href="#projects">Projects</a>
            <a class="btn magnetic" href="#contact">Contact</a>
          </div>
        </div>

        <div class="hero-right" aria-hidden="false">
          <img class="portrait" alt="Pratik portrait" src="assets/img/portrait.jpg"/>
        </div>
      </div>
    </section>

    <!-- ABOUT -->
    <section id="about" class="section" aria-label="about">
      <div class="wrap">
        <h2 style="margin:0 0 8px 0">About</h2>
        <p class="muted" style="max-width:860px">I design and test high-performance combustion systems for aerospace and energy â€” experiments, diagnostics, CFD, and test automation. I build test rigs, design injectors and automate data processing to shorten development cycles.</p>

        <div class="timeline" style="margin-top:20px">
          <div class="timeline-card">
            <div class="text-sm muted">Dec 2024</div>
            <div class="font-semibold">MS â€” Aerospace Engineering</div>
            <div class="muted">University of Tennessee Space Institute</div>
          </div>
          <div class="timeline-card">
            <div class="text-sm muted">Apr 2020</div>
            <div class="font-semibold">MEng â€” Propulsion</div>
            <div class="muted">Nanjing University of Aeronautics & Astronautics</div>
          </div>
          <div class="timeline-card">
            <div class="text-sm muted">Nov 2015</div>
            <div class="font-semibold">BTech â€” Aerospace Engineering</div>
            <div class="muted">SRM University, Chennai</div>
          </div>
        </div>
      </div>
    </section>

    <!-- EDUCATION -->
    <section id="education" class="section" aria-label="education">
      <div class="wrap">
        <h2 style="margin-bottom:12px">Education & Awards</h2>
        <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:16px">
          <div class="timeline-card">
            <div class="font-semibold">MS â€” Aerospace Engineering</div>
            <div class="muted">University of Tennessee Space Institute â€” Dec 2024</div>
            <p class="muted" style="margin-top:8px">Thesis: [Thesis title]. Focus: combustion, diagnostics & high-pressure testing.</p>
          </div>
          <div class="timeline-card">
            <div class="font-semibold">MEng â€” Propulsion</div>
            <div class="muted">NUAA, China â€” Apr 2020</div>
            <p class="muted" style="margin-top:8px">Research & practical experience in injector systems and propulsion.</p>
          </div>
          <div class="timeline-card">
            <div class="font-semibold">BTech â€” Aerospace Engineering</div>
            <div class="muted">SRM University, Chennai â€” Nov 2015</div>
            <p class="muted" style="margin-top:8px">Undergraduate project: [Short description].</p>
          </div>
        </div>
      </div>
    </section>

    <!-- SKILLS -->
    <section id="skills" class="section" aria-label="skills">
      <div class="wrap">
        <h2 style="margin-bottom:12px">Skills</h2>
        <div style="max-width:820px">
          <div class="skill-row"><div>Propulsion & Gas Turbine Systems</div><div>90%</div></div>
          <div class="skill-bar"><div class="skill-fill" data-fill="90%"></div></div>

          <div class="skill-row" style="margin-top:12px"><div>CFD (ANSYS Fluent / OpenFOAM)</div><div>85%</div></div>
          <div class="skill-bar"><div class="skill-fill" data-fill="85%"></div></div>

          <div class="skill-row" style="margin-top:12px"><div>Testing & Diagnostics</div><div>92%</div></div>
          <div class="skill-bar"><div class="skill-fill" data-fill="92%"></div></div>
        </div>
      </div>
    </section>

    <!-- EXPERIENCE -->
    <section id="experience" class="section" aria-label="experience">
      <div class="wrap">
        <h2 style="margin-bottom:12px">Professional Experience</h2>

        <!-- experience list: animated on scroll -->
        <div class="exp-list">
          <div class="exp-item" data-anim>
            <div class="exp-meta"><strong>Apr 2025 âˆ’ Present</strong><div class="muted">Pinnacle Arc LLC</div></div>
            <div class="exp-body">
              <h4>Data Analyst (Contract) â€” Propulsion & Test Data</h4>
              <p>Automated data processing pipelines, maintained high-pressure test datasets, and supported CFD-validation efforts.</p>
            </div>
          </div>

          <div class="exp-item" data-anim>
            <div class="exp-meta"><strong>Sep 2023 âˆ’ Dec 2024</strong><div class="muted">UT Space Institute</div></div>
            <div class="exp-body">
              <h4>Graduate Researcher â€” Combustion Systems</h4>
              <p>Led ignition and flame diagnostics projects using high-speed chemiluminescence and Schlieren imaging; correlated experiments with LES/VLES CFD.</p>
            </div>
          </div>

          <div class="exp-item" data-anim>
            <div class="exp-meta"><strong>Sep 2022 âˆ’ Aug 2023</strong><div class="muted">Oregon State Univ</div></div>
            <div class="exp-body">
              <h4>Graduate Research Assistant</h4>
              <p>Developed test rigs and instrumentation for spray/flame interaction experiments and analyzed PIV/LDI datasets.</p>
            </div>
          </div>

        </div>
      </div>
    </section>

    <!-- PROJECTS -->
    <section id="projects" class="section" aria-label="projects">
      <div class="wrap">
        <h2 style="margin-bottom:12px">Selected Projects</h2>
        <div class="projects-grid">
          <article class="project-card" tabindex="0">
            <div class="font-semibold">High-pressure hydrogen injector</div>
            <p class="muted" style="margin-top:6px">Design, validation, and ignition mapping of a swirl injector using high-pressure rigs and CFD.</p>
          </article>

          <article class="project-card" tabindex="0">
            <div class="font-semibold">Ammonia SI GDI study</div>
            <p class="muted" style="margin-top:6px">GDI experiments and diagnostics for ammonia/hydrocarbon blends.</p>
          </article>

          <article class="project-card" tabindex="0">
            <div class="font-semibold">Test automation & reporting</div>
            <p class="muted" style="margin-top:6px">Automated DAQ scripts, postprocessing, and auto-generated test reports for efficiency.</p>
          </article>
        </div>
      </div>
    </section>

    <!-- PUBLICATIONS -->
    <section id="publications" class="section" aria-label="publications">
      <div class="wrap">
        <h2 style="margin-bottom:12px">Publications</h2>
        <div class="pub-grid">
          <a class="pub-card" href="https://example.com/paper1" target="_blank" rel="noopener noreferrer">
            <div class="font-semibold">Ignition Characteristics of Hydrogen/Air</div>
            <div class="muted" style="margin-top:6px">ASME Turbo-Expo, 2024</div>
          </a>
          <a class="pub-card" href="https://example.com/paper2" target="_blank" rel="noopener noreferrer">
            <div class="font-semibold">Comparison of VLES and LES</div>
            <div class="muted" style="margin-top:6px">J. Applied Fluid Mech, 2020</div>
          </a>
          <a class="pub-card" href="all_publications.html" target="_blank" rel="noopener noreferrer">
            <div class="font-semibold">All Publications</div>
            <div class="muted" style="margin-top:6px">Click to view full list</div>
          </a>
        </div>
      </div>
    </section>

    <!-- CONTACT -->
    <section id="contact" class="section" aria-label="contact">
      <div class="wrap">
        <h2 style="margin-bottom:12px">Contact</h2>
        <div class="contact-wrapper">
          <p style="margin:0 0 8px 0">Email: <a href="mailto:ptiwari4@vols.utk.edu">ptiwari4@vols.utk.edu</a></p>
          <p style="margin:0 0 8px 0">Phone: +1 458-272-7955</p>
          <p class="muted" style="margin-top:8px">Connect:</p>
          <div class="contact-icons" role="list">
            <a href="https://www.linkedin.com/in/pratiktiwari/" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn"><i class="fab fa-linkedin"></i></a>
            <a href="https://orcid.org" target="_blank" rel="noopener noreferrer" aria-label="ORCID"><i class="fab fa-orcid"></i></a>
            <a href="https://scholar.google.com" target="_blank" rel="noopener noreferrer" aria-label="Google Scholar"><i class="fas fa-graduation-cap"></i></a>
            <a href="mailto:ptiwari4@vols.utk.edu" aria-label="Email"><i class="fas fa-envelope"></i></a>
          </div>
        </div>
      </div>
    </section>

  </div>

  <!-- ================= SCRIPTS ================= -->
  <script>
  // reduced motion
  const reducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

  /* -------------------- Flame shader (Three.js) - working shader you provided -------------------- */
  (function FlameShader(){
    const canvas = document.getElementById('flame');
    if(!canvas || reducedMotion){ canvas && (canvas.style.display='none'); return; }

    const renderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true, alpha: true });
    const DPR = Math.min(window.devicePixelRatio || 1, 2);
    renderer.setPixelRatio(DPR);
    renderer.setSize(window.innerWidth, window.innerHeight);

    const scene = new THREE.Scene();
    const camera = new THREE.OrthographicCamera(-1,1,1,-1,0,1);
    const geometry = new THREE.PlaneGeometry(2,2);

    const uniforms = {
      u_time: { value: 0.0 },
      u_resolution: { value: new THREE.Vector2(window.innerWidth, window.innerHeight) },
      u_mouse: { value: new THREE.Vector2(-9999,-9999) },
      u_intensity: { value: 1.0 }
    };

    const frag = `precision highp float;
    uniform vec2 u_resolution; uniform float u_time; uniform vec2 u_mouse; uniform float u_intensity;
    float hash(vec2 p){return fract(sin(dot(p,vec2(127.1,311.7)))*43758.5453123);}
    float noise(vec2 p){vec2 i=floor(p);vec2 f=fract(p);vec2 u=f*f*(3.0-2.0*f);float a=hash(i),b=hash(i+vec2(1.0,0.0)),c=hash(i+vec2(0.0,1.0)),d=hash(i+vec2(1.0,1.0));return mix(mix(a,b,u.x),mix(c,d,u.x),u.y);}
    float fbm(vec2 p){float v=0.0;float a=0.5;for(int i=0;i<5;i++){v+=a*noise(p);p*=2.0;a*=0.5;}return v;}
    void main(){ vec2 uv=gl_FragCoord.xy/u_resolution.xy; vec2 pos=uv-0.5; pos.x*=u_resolution.x/u_resolution.y;
      float t=u_time*0.6;
      float core = smoothstep(0.2,0.9,1.0 - (pos.y+0.5)*1.6);
      float n = fbm(vec2(pos.x*2.0, pos.y*3.0 - t*0.8));
      float flameshape = core * (0.5 + 0.8*n);
      float radial = smoothstep(0.9,0.2,length(pos.xy*vec2(1.0,0.9)));
      float intensity = clamp(flameshape * radial, 0.0,1.0);
      float smoke = fbm(vec2(pos.x*0.8, pos.y*1.2 - t*0.25));
      smoke = smoothstep(0.2,0.8,smoke);
      vec3 hot = vec3(1.0,0.96,0.8);
      vec3 yellow = vec3(1.0,0.7,0.14);
      vec3 orange = vec3(0.98,0.42,0.08);
      vec3 red = vec3(0.65,0.12,0.03);
      vec3 smokeCol = vec3(0.06,0.06,0.08);
      vec3 col = mix(smokeCol, red, intensity);
      col = mix(col, orange, intensity*0.8);
      col = mix(col, yellow, intensity*0.5);
      col = mix(col, hot, intensity*0.25);
      float flick = 0.12 * noise(vec2(pos.x*5.0 + u_time*0.8, pos.y*3.0));
      float md = length((gl_FragCoord.xy - u_mouse) / u_resolution.xy);
      float mouseBoost = exp(-md*6.0);
      intensity += flick * mouseBoost * 0.6;
      float smokeOverlay = smoothstep(0.25, 0.8, smoke) * (1.0 - intensity*0.6);
      float alpha = clamp(intensity*1.2 + (1.0 - pos.y)*0.2, 0.0, 1.0);
      vec3 finalCol = mix(vec3(0.02,0.02,0.03), col*(0.6 + intensity*0.8), alpha);
      finalCol = mix(finalCol, vec3(0.08,0.08,0.09), smokeOverlay*0.6);
      finalCol = 1.0 - exp(-finalCol * (2.2 * u_intensity));
      float vignette = smoothstep(0.0, 0.8, 1.0 - length(pos)*1.3);
      finalCol *= vignette;
      gl_FragColor = vec4(finalCol, clamp(alpha + (1.0 - smokeOverlay)*0.05, 0.0, 1.0));
    }`;

    const material = new THREE.ShaderMaterial({ fragmentShader: frag, uniforms, transparent:true, depthWrite:false });
    const mesh = new THREE.Mesh(geometry, material); scene.add(mesh);

    const clock = new THREE.Clock();

    function onPointerMove(e){
      const rect = renderer.domElement.getBoundingClientRect();
      const x = (e.clientX - rect.left);
      const y = (rect.bottom - e.clientY);
      uniforms.u_mouse.value.set(x,y);
    }
    window.addEventListener('pointermove', onPointerMove, {passive:true});

    function onResize(){ const w=window.innerWidth,h=window.innerHeight; renderer.setSize(w,h); uniforms.u_resolution.value.set(w,h); }
    window.addEventListener('resize', onResize, {passive:true});

    function render(){ uniforms.u_time.value = clock.getElapsedTime(); renderer.render(scene, camera); requestAnimationFrame(render); }
    render();

    window._flameUniforms = uniforms;
  })();

  /* -------------------- UI & Animations -------------------- */
  (function UI(){
    gsap.registerPlugin(ScrollTrigger);

    // fullpage navigation with anchors
    function initFullpage(){
      try{ if(typeof fullpage_api !== 'undefined') fullpage_api.destroy('all'); } catch(e){}
      new fullpage('#fullpage', {
        anchors: ['home','about','education','skills','experience','projects','publications','contact'],
        navigation:true,
        scrollingSpeed:800,
        licenseKey:'OPEN-SOURCE-OK',
        onLeave: function(origin,destination,direction){
          if(origin.anchor === 'home' && window._flameUniforms) {
            gsap.to(window._flameUniforms.u_intensity, { value:1.4, duration:0.35, yoyo:true, repeat:1 });
          }
        }
      });
    }

    // hero entrance
    function initHero(){
      if(reducedMotion) return;
      gsap.from("#heroTitle", { y:20, opacity:0, duration:0.9, ease:'power3.out' });
      gsap.from(".lead", { y:10, opacity:0, duration:0.8, delay:0.12 });
      gsap.from(".portrait", { scale:0.95, opacity:0, duration:1, delay:0.24, ease:'elastic.out(1,0.6)' });
      gsap.from(".cta .btn", { y:12, opacity:0, duration:0.8, stagger:0.08, delay:0.36 });
    }

    // magnetic buttons
    function initMagnetics(){
      document.querySelectorAll('.magnetic').forEach(el=>{
        el.addEventListener('pointermove', e=>{
          const r = el.getBoundingClientRect();
          const dx = (e.clientX - (r.left + r.width/2));
          const dy = (e.clientY - (r.top + r.height/2));
          gsap.to(el, { x: dx*0.12, y: dy*0.08, scale:1.03, duration:0.28 });
        }, {passive:true});
        el.addEventListener('pointerleave', ()=> gsap.to(el, { x:0,y:0,scale:1, duration:0.35 }));
      });
    }

    // skill fills
    function initSkills(){
      document.querySelectorAll('.skill-fill').forEach(el=>{
        const val = el.dataset.fill || '80%';
        gsap.to(el, { width: val, duration:1.4, ease:'power2.out', scrollTrigger:{ trigger: el, start:'top 85%' }});
      });
    }

    // experience anim (inspired by reference)
    function initExperience(){
      gsap.utils.toArray('[data-anim]').forEach((el, i) => {
        gsap.from(el, { y: 26, opacity: 0, duration: 0.85, delay: i*0.08, ease:'power3.out', scrollTrigger:{ trigger: el, start:'top 92%' }});
      });
    }

    // project tilt
    function initProjectTilt(){
      document.querySelectorAll('.project-card').forEach(card=>{
        card.addEventListener('pointermove', e=>{
          const r = card.getBoundingClientRect();
          const px = (e.clientX - r.left)/r.width;
          const py = (e.clientY - r.top)/r.height;
          const rx = (py - 0.5) * 6;
          const ry = (px - 0.5) * -6;
          gsap.to(card, { rotateX: rx, rotateY: ry, duration:0.28, ease:'power2.out' });
        }, {passive:true});
        card.addEventListener('pointerleave', ()=> gsap.to(card, { rotateX:0, rotateY:0, duration:0.5, ease:'power2.out' }));
      });
    }

    // nav links with fullpage
    function initNavLinks(){
      document.querySelectorAll('nav a').forEach(a=>{
        a.addEventListener('click', e=>{
          e.preventDefault();
          const anchor = a.getAttribute('href').replace('#','');
          if(typeof fullpage_api !== 'undefined') fullpage_api.moveTo(anchor);
        });
      });
    }

    // theme toggle with persistence
    function initThemeToggle(){
      const toggle = document.getElementById('themeToggle');
      const stored = localStorage.getItem('pt_theme');
      if(stored === 'dark'){ document.body.classList.add('dark'); toggle.textContent = 'â˜€ï¸'; toggle.setAttribute('aria-pressed','true'); }
      else { document.body.classList.remove('dark'); toggle.textContent = 'ðŸŒ™'; toggle.setAttribute('aria-pressed','false'); }

      toggle.addEventListener('click', ()=> {
        const nowDark = document.body.classList.toggle('dark');
        toggle.textContent = nowDark ? 'â˜€ï¸' : 'ðŸŒ™';
        toggle.setAttribute('aria-pressed', String(nowDark));
        localStorage.setItem('pt_theme', nowDark ? 'dark' : 'light');
      });
    }

    window.addEventListener('load', ()=>{
      initFullpage();
      initHero();
      initMagnetics();
      initSkills();
      initExperience();
      initProjectTilt();
      initNavLinks();
      initThemeToggle();
    });
  })();
  </script>
</body>
</html>
